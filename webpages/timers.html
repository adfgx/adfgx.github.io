<!DOCTYPE html>
<html>
<head>
  <title>Interval Timers</title>
  <style>
    body {
      background-color: rgb(235, 116, 116);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      margin: 0;
      font-family: Arial, sans-serif;
      overflow-y: auto; /* Enable vertical scrolling for the page */
    }
    #button-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      width: 100%;
      padding: 10px;
    }
    .Rtimer1, .Rtimer2, .Rtimer3, .Rtimer4, .Rtimer5, .Itimer1, .Itimer2, .Itimer3, .Itimer4, 
    .Ctimer1, .Ctimer2, .Ctimer3, .Ctimer4, .Ctimer5, .Ctimer6, .Ctimer7, .Retimer1, .Retimer2, .Retimer3 {
      font-size: 3vw;
      padding: 10px;
      margin: 5px;
      cursor: pointer;
      background-color: #00c3ff;
      color: white;
      border: none;
      border-radius: 5px;
      display: none;
    }
    .button1, .button2, .button3, .button4 {
      font-size: 3vw;
      padding: 10px;
      margin: 5px;
      cursor: pointer;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
    }
    #display {
      font-size: 6vw;
      color: black;
      text-align: center;
      white-space: nowrap;
      overflow: hidden;
      margin-top: 20px;
    }
    /* Timer display */
    #timer {
      font-size: 6vw;
      color: black;
      text-align: center;
      margin-top: 20px;
    }
    #flexdance {
      height: 15vh;
      width: 25vh;
      margin-top: 5px;
    }
    /* Container for information text */
    .info-container {
      width: 90%;
      max-width: 800px;
      margin-top: 20px;
      padding: 15px;
      background-color: rgba(0, 0, 0, 0.2);
      border-radius: 5px;
    }
    /* Style for button information text */
    .Rtimerd1, .Rtimerd2, .Itimerd1, .Itimerd2, .Itimerd3 {
      font-size: 1.2vw;
      color: white;
      margin-top: 10px;
      display: none;
    }
    /* Container for buttons at the bottom */
    #button-link-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      width: 100%;
      padding: 10px;
    }
    /* Style for buttons at the bottom */
    #index, #map {
      font-size: 3vw;
      padding: 10px;
      margin: 5px;
      cursor: pointer;
      color: white;
      background-color: #a31b81;
      border: none;
      border-radius: 5px;
      text-decoration: none;
    }
    #work-cycle-list {
      font-size: 3vw;
      color: black;
      text-align: center;
      margin-left: 50px;
    }
  </style>
</head>
<body>

  <!--BUTTON CONTAINER-->
  <div id="button-container">

    <!--Roll timers-->
    <button class="Rtimer1" data-timer="16">3 min duo</button>
    <button class="Rtimer2" data-timer="17">5 min duo</button>
    <button class="Rtimer3" data-timer="18">3 min trio</button>
    <button class="Rtimer4" data-timer="19">5 min trio</button>
    <button class="Rtimer5" data-timer="20">/</button>

    <!--Interval timers-->
    <button class="Itimer1" data-timer="12">60s interval</button>
    <button class="Itimer2" data-timer="13">30sw, 10sr, 4s</button>
    <button class="Itimer3" data-timer="14">Endurance Board</button>
    <button class="Itimer4" data-timer="15">/</button>

    <!--Command timers-->
    <button class="Ctimer1" data-timer="5">B Strikes</button>
    <button class="Ctimer2" data-timer="6">fB Strikes & B Takedowns</button>
    <button class="Ctimer3" data-timer="7">sB Strikes & B Takedowns</button>
    <button class="Ctimer4" data-timer="8">1000ms</button>
    <button class="Ctimer5" data-timer="9">1500ms</button>
    <button class="Ctimer6" data-timer="10">2000ms</button>
    <button class="Ctimer7" data-timer="11">/</button>

    <!--Rest timers-->
    <button class="Retimer1" data-timer="21">150s</button>
    <button class="Retimer2" data-timer="22">90s</button>
    <button class="Retimer3" data-timer="23">/</button>

    <!--Dropdown buttons-->
    <button class="button1" data-timer="1">Interval</button>
    <button class="button2" data-timer="2">Command</button>
    <button class="button3" data-timer="3">Roll</button>
    <button class="button4" data-timer="4">Rest</button>

  </div>

  <!--Animated image-->
  <img id="flexdance" src="../videos/dance-lisa-simpson.gif">

  <!-- Display, Timer and Work Cycle Area -->
   <div id="display-area">
    <div id="display">Display Area</div>
    <div id="timer">Timer area</div>
    <div id="work-cycle-list"></div>
  </div>


  <!-- Information Text Container with Sample Text -->
  <div class="info-container">
    <div class="Rtimerd1">
      Duo timers; two sets, rest is half of working set.
    </div>
    <div class="Rtimerd2">
      Trio timers; every participant rolls every combination with a minute rest. Each participant is associated with a letter; "A", "C", "T". 
    </div>
    <div class="Itimerd1">
      60s interval; sixty seconds interval for four minutes with sound each minute.
    </div>
    <div class="Itimerd2">
      30sw, 10sr, 4s; thirty seconds work, ten seconds rest for four sets.
    </div>
    <div class="Itimerd3">
      Enducance board; ten seconds work, five seconds rest for eight sets.
    </div>
  </div>
  <!-- Button container at the bottom -->
  <div id="button-link-container">
    <a id="index" href="../index.html">back to the lobby</a>
    <a id="map" href="../webpages/map.html">map</a>
  </div>

  <!-- AUDIO ELEMENTS IDENTIFICATION -->
  <audio id="audio-3" src="../sound files/3.wav"></audio>
  <audio id="audio-2" src="../sound files/2.wav"></audio>
  <audio id="audio-1" src="../sound files/1.wav"></audio>
  <audio id="audio-rest" src="../sound files/rest.mp3"></audio>
  <audio id="audio-work" src="../sound files/work.mp3"></audio>
  <audio id="kick-sound" src="../sound files/kick.mp3"></audio>
  <audio id="jab-sound" src="../sound files/jab.mp3"></audio>
  <audio id="cross-sound" src="../sound files/cross.mp3"></audio>
  <audio id="hook-sound" src="../sound files/hook.mp3"></audio>
  <audio id="blt-sound" src="../sound files/blt.mp3"></audio>
  <audio id="ht-sound" src="../sound files/ht.mp3"></audio>
  <audio id="sprawl-sound" src="../sound files/sprawl.mp3"></audio>
  <audio id="whip-sound" src="../sound files/whip.mp3"></audio>

  <script>

    //FUNCTION ASSOCIATIONS
    const displayElement = document.getElementById('display');
    const workCycleList = document.getElementById('work-cycle-list');
    const timerElement = document.getElementById('timer');
    //Roll timers
    const Rtimer1 = document.querySelector('.Rtimer1');
    const Rtimer2 = document.querySelector('.Rtimer2');
    const Rtimer3 = document.querySelector('.Rtimer3');
    const Rtimer4 = document.querySelector('.Rtimer4');
    const Rtimer5 = document.querySelector('.Rtimer5');
    const Rtimerd1 = document.querySelector('.Rtimerd1');
    const Rtimerd2 = document.querySelector('.Rtimerd2');
    //Interval timers
    const Itimer1 = document.querySelector('.Itimer1');
    const Itimer2 = document.querySelector('.Itimer2');
    const Itimer3 = document.querySelector('.Itimer3');
    const Itimer4 = document.querySelector('.Itimer4');
    const Itimerd1 = document.querySelector('.Itimerd1');
    const Itimerd2 = document.querySelector('.Itimerd2');
    const Itimerd3 = document.querySelector('.Itimerd3');
    //Command timers
    const Ctimer1 = document.querySelector('.Ctimer1');
    const Ctimer2 = document.querySelector('.Ctimer2');
    const Ctimer3 = document.querySelector('.Ctimer3');
    const Ctimer4 = document.querySelector('.Ctimer4');
    const Ctimer5 = document.querySelector('.Ctimer5');
    const Ctimer6 = document.querySelector('.Ctimer6');
    const Ctimer7 = document.querySelector('.Ctimer7');
    //Rest timers
    const Retimer1 = document.querySelector('.Retimer1');
    const Retimer2 = document.querySelector('.Retimer2');
    const Retimer3 = document.querySelector('.Retimer3');
    //Dropdown buttons
    const button1 = document.querySelector('.button1');
    const button2 = document.querySelector('.button2');
    const button3 = document.querySelector('.button3');
    const button4 = document.querySelector('.button4');

    let countdownInterval; // Stores the interval for clearing
    let loopTimeoutId; // Loop timeout ID
    let endTimeoutId; // End timeout ID to stop the loop after 90 seconds
    let startCountdownIntervalId; // Interval ID for the 5 seconds pre-loop countdown
    let remainingTime; // Remaining time in seconds
    let countdownIntervalId; // Interval ID for the countdown timer

    // Initialize hidden state for both dropdowns
    
    let areRollTimersHidden = true;
    let areIntervalTimersHidden = true;
    let areCommandTimersHidden = true;
    let areRestTimersHidden = true;

    // Hide/Show Rest timers when "Rest" button is clicked
    button4.addEventListener('click', () => {
    clearInterval(countdownInterval); // Stop any existing countdown
    clearTimeout(loopTimeoutId); // Clear existing loop
    clearTimeout(endTimeoutId); // Clear end timer
    clearInterval(startCountdownIntervalId); // Clear pre-loop countdown
    stopTimer(); // Ensure no other timers are running

    // Hide Roll, Command, Interval timers if visible
    Rtimer1.style.display = 'none';
    Rtimer2.style.display = 'none';
    Rtimer3.style.display = 'none';
    Rtimer4.style.display = 'none';
    Rtimer5.style.display = 'none';
    Rtimerd1.style.display = 'none';
    Rtimerd2.style.display = 'none';
    Ctimer1.style.display = 'none';
    Ctimer2.style.display = 'none';
    Ctimer3.style.display = 'none';
    Ctimer4.style.display = 'none';
    Ctimer5.style.display = 'none';
    Ctimer6.style.display = 'none';
    Ctimer7.style.display = 'none';
    Itimer1.style.display = 'none';
    Itimer2.style.display = 'none';
    Itimer3.style.display = 'none';
    Itimer4.style.display = 'none';
    Itimerd1.style.display = 'none';
    Itimerd2.style.display = 'none';
    Itimerd3.style.display = 'none';

    areRollTimersHidden = true;
    areCommandTimersHidden = true;
    areIntervalTimersHidden = true;

    // Toggle Rest timers visibility
    areRestTimersHidden = !areRestTimersHidden;
    const displayStyle = areRestTimersHidden ? 'none' : 'inline-block';
    Retimer1.style.display = displayStyle;
    Retimer2.style.display = displayStyle;
    Retimer3.style.display = displayStyle;
    
    displayElement.textContent = areRestTimersHidden ? "Display Area" : "Rest Timers";
    timerElement.textContent = areRestTimersHidden ? "" : "";
    });

    // Hide/Show Interval timers when "Interval" button is clicked
    button1.addEventListener('click', () => {
    clearInterval(countdownInterval); // Stop any existing countdown
    clearTimeout(loopTimeoutId); // Clear existing loop
    clearTimeout(endTimeoutId); // Clear end timer
    clearInterval(startCountdownIntervalId); // Clear pre-loop countdown
    stopTimer(); // Ensure no other timers are running

    // Hide Roll, Command, Rest timers if visible
    Rtimer1.style.display = 'none';
    Rtimer2.style.display = 'none';
    Rtimer3.style.display = 'none';
    Rtimer4.style.display = 'none';
    Rtimer5.style.display = 'none';
    Rtimerd1.style.display = 'none';
    Rtimerd2.style.display = 'none';
    Ctimer1.style.display = 'none';
    Ctimer2.style.display = 'none';
    Ctimer3.style.display = 'none';
    Ctimer4.style.display = 'none';
    Ctimer5.style.display = 'none';
    Ctimer6.style.display = 'none';
    Ctimer7.style.display = 'none';
    Retimer1.style.display = 'none';
    Retimer2.style.display = 'none';
    Retimer3.style.display = 'none';

    areRollTimersHidden = true;
    areCommandTimersHidden = true;
    areRestTimersHidden = true;

    // Toggle Interval timers visibility
    areIntervalTimersHidden = !areIntervalTimersHidden;
    const displayStyle = areIntervalTimersHidden ? 'none' : 'inline-block';
    Itimer1.style.display = displayStyle;
    Itimer2.style.display = displayStyle;
    Itimer3.style.display = displayStyle;
    Itimer4.style.display = displayStyle;
    Itimerd1.style.display = displayStyle;
    Itimerd2.style.display = displayStyle;
    Itimerd3.style.display = displayStyle;
    
    displayElement.textContent = areIntervalTimersHidden ? "Display Area" : "Interval Timers";
    timerElement.textContent = areRestTimersHidden ? "" : "";
    });

    // Hide/Show Roll timers when "Roll" button is clicked
    button3.addEventListener('click', () => {
    clearInterval(countdownInterval); // Stop any existing countdown
    clearTimeout(loopTimeoutId); // Clear existing loop
    clearTimeout(endTimeoutId); // Clear end timer
    clearInterval(startCountdownIntervalId); // Clear pre-loop countdown
    stopTimer(); // Ensure no other timers are running

    // Hide Interval, Command, Rest timers if visible
    Itimer1.style.display = 'none';
    Itimer2.style.display = 'none';
    Itimer3.style.display = 'none';
    Itimer4.style.display = 'none';
    Itimerd1.style.display = 'none';
    Itimerd2.style.display = 'none';
    Itimerd3.style.display = 'none';
    Ctimer1.style.display = 'none';
    Ctimer2.style.display = 'none';
    Ctimer3.style.display = 'none';
    Ctimer4.style.display = 'none';
    Ctimer5.style.display = 'none';
    Ctimer6.style.display = 'none';
    Ctimer7.style.display = 'none';
    Retimer1.style.display = 'none';
    Retimer2.style.display = 'none';
    Retimer3.style.display = 'none';

    areIntervalTimersHidden = true;
    areCommandTimersHidden = true;
    areRestTimersHidden = true;

    // Toggle Roll timers visibility
    areRollTimersHidden = !areRollTimersHidden;
    const displayStyle = areRollTimersHidden ? 'none' : 'inline-block';
    Rtimer1.style.display = displayStyle;
    Rtimer2.style.display = displayStyle;
    Rtimer3.style.display = displayStyle;
    Rtimer4.style.display = displayStyle;
    Rtimer5.style.display = displayStyle;
    Rtimerd1.style.display = displayStyle;
    Rtimerd2.style.display = displayStyle;
 
    displayElement.textContent = areRollTimersHidden ? "Display Area" : "Roll Timers";
    timerElement.textContent = areRestTimersHidden ? "" : "";
    });

    // Hide/Show Command timers when "Command" button is clicked
    button2.addEventListener('click', () => {
    clearInterval(countdownInterval); // Stop any existing countdown
    clearTimeout(loopTimeoutId); // Clear existing loop
    clearTimeout(endTimeoutId); // Clear end timer
    clearInterval(startCountdownIntervalId); // Clear pre-loop countdown
    stopTimer(); // Ensure no other timers are running

    // Hide Roll, Interval, Rest timers if visible
    Rtimer1.style.display = 'none';
    Rtimer2.style.display = 'none';
    Rtimer3.style.display = 'none';
    Rtimer4.style.display = 'none';
    Rtimer5.style.display = 'none';
    Rtimerd1.style.display = 'none';
    Rtimerd2.style.display = 'none';
    Itimer1.style.display = 'none';
    Itimer2.style.display = 'none';
    Itimer3.style.display = 'none';
    Itimer4.style.display = 'none';
    Itimerd1.style.display = 'none';
    Itimerd2.style.display = 'none';
    Itimerd3.style.display = 'none';
    Retimer1.style.display = 'none';
    Retimer2.style.display = 'none';
    Retimer3.style.display = 'none';

    areRollTimersHidden = true;
    areIntervalTimersHidden = true;
    areRestTimersHidden = true;

    // Toggle Command timers visibility
    areCommandTimersHidden = !areCommandTimersHidden;
    const displayStyle = areCommandTimersHidden ? 'none' : 'inline-block';
    Ctimer1.style.display = displayStyle;
    Ctimer2.style.display = displayStyle;
    Ctimer3.style.display = displayStyle;
    Ctimer4.style.display = displayStyle;
    Ctimer5.style.display = displayStyle;
    Ctimer6.style.display = displayStyle;
    Ctimer7.style.display = displayStyle;

    displayElement.textContent = areCommandTimersHidden ? "Display Area" : "Command Timers";
    timerElement.textContent = areRestTimersHidden ? "Timer" : "Timer";
  });
    

    // FUNCTION TO PLAY AUDIO BY ID
    function playAudio(id) {
      const audio = document.getElementById(id);
      if (audio) {
        audio.currentTime = 0;
        audio.play();
      }
    }
    
    // Function to shuffle an array
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // COUNTDOWN FUNCTION WITH VOICEOVER AND CUSTOM DISPLAY TEXT
    function startCountdown(duration, endSound, displayText, callback) {
      let timeLeft = duration;
      displayElement.textContent = `${displayText}: ${timeLeft} seconds`;
      
      countdownInterval = setInterval(() => {
        if (timeLeft <= 3) playAudio(`audio-${timeLeft}`); // Play voiceover for last 3 seconds
        
        timeLeft--;
        
        if (timeLeft < 0) {
          clearInterval(countdownInterval);
          playAudio(endSound); // Play "rest" or "work" sound
          callback();
        } else {
          displayElement.textContent = `${displayText}: ${timeLeft} seconds`;
        }
      }, 1000);
    }

    // Function to display the countdown before starting the loop for command timers
    function startPreLoopCountdown(callback) {
    let countdownTime = 5;
    timerElement.textContent = `Starting in: ${countdownTime}`;

    startCountdownIntervalId = setInterval(() => {
      countdownTime--;
      if (countdownTime <= 0) {
        clearInterval(startCountdownIntervalId);
        timerElement.textContent = ''; // Clear the countdown timer display
        callback(); // Start the loop function after countdown ends
      } else {
        timerElement.textContent = `Starting in: ${countdownTime}`;
      }
    }, 1000);
  }

    // Function to start the countdown timer for command timers
    function startTimer(duration) {
      remainingTime = duration;
      updateTimerDisplay(remainingTime);
      
      countdownIntervalId = setInterval(() => {
        remainingTime--;
        if (remainingTime <= 0) {
          clearInterval(countdownIntervalId);
          timerElement.textContent = '';
        } else {
          updateTimerDisplay(remainingTime);
        }
      }, 1000);
    }

    // Function to update the timer display for command timers
    function updateTimerDisplay(time) {
      const minutes = Math.floor(time / 60);
      const seconds = time % 60;
      timerElement.textContent = `Time: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
    }

    // Function to stop active timers and intervals for command timers
function stopTimer() {
  if (countdownIntervalId !== undefined) {
    clearInterval(countdownIntervalId);
    //console.log("Timer stopped."); // Debugging log
  }
}

    // COMMAND TIMERS
    // Ctimer6 
    function startCtimer6Sequence() {
  const Ctimer6Words = ['whip'];
  let copy = [...Ctimer6Words]; // Clone the array to shuffle independently

  function loop() {
    if (!copy.length) copy = [...Ctimer6Words]; // Reset array when empty

    const rnd = Math.floor(Math.random() * copy.length);
    const word = copy.splice(rnd, 1)[0]; // Pick and remove a random word
    //console.log(`Displaying word: ${word}`); // Debugging log
    displayElement.textContent = word;

    const audio = document.getElementById(`${word}-sound`);
    if (audio) {
      audio.currentTime = 0;
      audio.play();
    }

    const delay = (word === 'whip') ? 2000 : 2000;
    loopTimeoutId = setTimeout(loop, delay); // Recursive loop
  }

  loop(); // Start the loop

  // Set a timeout to stop the loop after 90 seconds
  endTimeoutId = setTimeout(() => {
    //console.log("Ctimer6 complete"); // Debugging log
    clearTimeout(loopTimeoutId); // Clear loop
    displayElement.textContent = "Ctimer6";
    stopTimer(); // Ensure timer is cleared
  }, 90000); // End sequence after 90 seconds

  startTimer(90); // Start countdown timer
}

// Event listener for Ctimer6
Ctimer6.addEventListener('click', () => {
  //console.log("Ctimer6 clicked"); // Debugging log
  clearTimeout(loopTimeoutId); // Clear existing loop
  clearTimeout(endTimeoutId); // Clear end timer
  clearInterval(startCountdownIntervalId); // Clear pre-loop countdown
  stopTimer(); // Ensure no other timers are running

  // Start pre-loop countdown, then sequence
  startPreLoopCountdown(() => {
    //console.log("Starting Ctimer6 sequence..."); // Debugging log
    startCtimer6Sequence();
  });
});

    // Ctimer5 
    function startCtimer5Sequence() {
  const Ctimer5Words = ['whip'];
  let copy = [...Ctimer5Words]; // Clone the array to shuffle independently

  function loop() {
    if (!copy.length) copy = [...Ctimer5Words]; // Reset array when empty

    const rnd = Math.floor(Math.random() * copy.length);
    const word = copy.splice(rnd, 1)[0]; // Pick and remove a random word
    //console.log(`Displaying word: ${word}`); // Debugging log
    displayElement.textContent = word;

    const audio = document.getElementById(`${word}-sound`);
    if (audio) {
      audio.currentTime = 0;
      audio.play();
    }

    const delay = (word === 'whip') ? 1500 : 1500;
    loopTimeoutId = setTimeout(loop, delay); // Recursive loop
  }

  loop(); // Start the loop

  // Set a timeout to stop the loop after 90 seconds
  endTimeoutId = setTimeout(() => {
    //console.log("Ctimer5 complete"); // Debugging log
    clearTimeout(loopTimeoutId); // Clear loop
    displayElement.textContent = "Ctimer5";
    stopTimer(); // Ensure timer is cleared
  }, 90000); // End sequence after 90 seconds

  startTimer(90); // Start countdown timer
}

// Event listener for Ctimer5
Ctimer5.addEventListener('click', () => {
  //console.log("Ctimer5 clicked"); // Debugging log
  clearTimeout(loopTimeoutId); // Clear existing loop
  clearTimeout(endTimeoutId); // Clear end timer
  clearInterval(startCountdownIntervalId); // Clear pre-loop countdown
  stopTimer(); // Ensure no other timers are running

  // Start pre-loop countdown, then sequence
  startPreLoopCountdown(() => {
    //console.log("Starting Ctimer5 sequence..."); // Debugging log
    startCtimer5Sequence();
  });
});

    // Ctimer4 
    function startCtimer4Sequence() {
  const Ctimer4Words = ['whip'];
  let copy = [...Ctimer4Words]; // Clone the array to shuffle independently

  function loop() {
    if (!copy.length) copy = [...Ctimer4Words]; // Reset array when empty

    const rnd = Math.floor(Math.random() * copy.length);
    const word = copy.splice(rnd, 1)[0]; // Pick and remove a random word
    //console.log(`Displaying word: ${word}`); // Debugging log
    displayElement.textContent = word;

    const audio = document.getElementById(`${word}-sound`);
    if (audio) {
      audio.currentTime = 0;
      audio.play();
    }

    const delay = (word === 'whip') ? 1000 : 1000;
    loopTimeoutId = setTimeout(loop, delay); // Recursive loop
  }

  loop(); // Start the loop

  // Set a timeout to stop the loop after 90 seconds
  endTimeoutId = setTimeout(() => {
    //console.log("Ctimer4 complete"); // Debugging log
    clearTimeout(loopTimeoutId); // Clear loop
    displayElement.textContent = "Ctimer4";
    stopTimer(); // Ensure timer is cleared
  }, 90000); // End sequence after 90 seconds

  startTimer(90); // Start countdown timer
}

// Event listener for Ctimer4
Ctimer4.addEventListener('click', () => {
  //console.log("Ctimer4 clicked"); // Debugging log
  clearTimeout(loopTimeoutId); // Clear existing loop
  clearTimeout(endTimeoutId); // Clear end timer
  clearInterval(startCountdownIntervalId); // Clear pre-loop countdown
  stopTimer(); // Ensure no other timers are running

  // Start pre-loop countdown, then sequence
  startPreLoopCountdown(() => {
    //console.log("Starting Ctimer4 sequence..."); // Debugging log
    startCtimer4Sequence();
  });
});

    // Ctimer3 
    function startCtimer3Sequence() {
  const Ctimer3Words = ['hook', 'hook', 'hook', 'kick', 'kick', 'kick', 'jab', 'jab', 'jab', 'jab', 'cross', 'cross', 'cross', 'blt', 'ht', 'sprawl'];
  let copy = [...Ctimer3Words]; // Clone the array to shuffle independently

  function loop() {
    if (!copy.length) copy = [...Ctimer3Words]; // Reset array when empty

    const rnd = Math.floor(Math.random() * copy.length);
    const word = copy.splice(rnd, 1)[0]; // Pick and remove a random word
    //console.log(`Displaying word: ${word}`); // Debugging log
    displayElement.textContent = word;

    const audio = document.getElementById(`${word}-sound`);
    if (audio) {
      audio.currentTime = 0;
      audio.play();
    }

    const delay = (word === 'kick' || word === 'sprawl' || word === 'blt' || word === 'ht') ? 2500 : 1500;
    loopTimeoutId = setTimeout(loop, delay); // Recursive loop
  }

  loop(); // Start the loop

  // Set a timeout to stop the loop after 90 seconds
  endTimeoutId = setTimeout(() => {
    //console.log("Ctimer3 complete"); // Debugging log
    clearTimeout(loopTimeoutId); // Clear loop
    displayElement.textContent = "Ctimer3";
    stopTimer(); // Ensure timer is cleared
  }, 90000); // End sequence after 90 seconds

  startTimer(90); // Start countdown timer
}

// Event listener for Ctimer3
Ctimer3.addEventListener('click', () => {
  //console.log("Ctimer3 clicked"); // Debugging log
  clearTimeout(loopTimeoutId); // Clear existing loop
  clearTimeout(endTimeoutId); // Clear end timer
  clearInterval(startCountdownIntervalId); // Clear pre-loop countdown
  stopTimer(); // Ensure no other timers are running

  // Start pre-loop countdown, then sequence
  startPreLoopCountdown(() => {
    //console.log("Starting Ctimer3 sequence..."); // Debugging log
    startCtimer3Sequence();
  });
});

    // Ctimer2 
    function startCtimer2Sequence() {
  const Ctimer2Words = ['hook', 'hook', 'hook', 'kick', 'kick', 'kick', 'jab', 'jab', 'jab', 'jab', 'cross', 'cross', 'cross', 'blt', 'ht', 'sprawl'];
  let copy = [...Ctimer2Words]; // Clone the array to shuffle independently

  function loop() {
    if (!copy.length) copy = [...Ctimer2Words]; // Reset array when empty

    const rnd = Math.floor(Math.random() * copy.length);
    const word = copy.splice(rnd, 1)[0]; // Pick and remove a random word
    //console.log(`Displaying word: ${word}`); // Debugging log
    displayElement.textContent = word;

    const audio = document.getElementById(`${word}-sound`);
    if (audio) {
      audio.currentTime = 0;
      audio.play();
    }

    const delay = (word === 'kick' || word === 'sprawl' || word === 'blt' || word === 'ht') ? 2000 : 1000;
    loopTimeoutId = setTimeout(loop, delay); // Recursive loop
  }

  loop(); // Start the loop

  // Set a timeout to stop the loop after 90 seconds
  endTimeoutId = setTimeout(() => {
    //console.log("Ctimer2 complete"); // Debugging log
    clearTimeout(loopTimeoutId); // Clear loop
    displayElement.textContent = "Ctimer2";
    stopTimer(); // Ensure timer is cleared
  }, 90000); // End sequence after 90 seconds

  startTimer(90); // Start countdown timer
}

// Event listener for Ctimer2
Ctimer2.addEventListener('click', () => {
  //console.log("Ctimer2 clicked"); // Debugging log
  clearTimeout(loopTimeoutId); // Clear existing loop
  clearTimeout(endTimeoutId); // Clear end timer
  clearInterval(startCountdownIntervalId); // Clear pre-loop countdown
  stopTimer(); // Ensure no other timers are running

  // Start pre-loop countdown, then sequence
  startPreLoopCountdown(() => {
    //console.log("Starting Ctimer2 sequence..."); // Debugging log
    startCtimer2Sequence();
  });
});

    // Ctimer1 
    function startCtimer1Sequence() {
  const Ctimer1Words = ['kick', 'jab', 'jab', 'cross', 'hook'];
  let copy = [...Ctimer1Words]; // Clone the array to shuffle independently

  function loop() {
    if (!copy.length) copy = [...Ctimer1Words]; // Reset array when empty

    const rnd = Math.floor(Math.random() * copy.length);
    const word = copy.splice(rnd, 1)[0]; // Pick and remove a random word
    //console.log(`Displaying word: ${word}`); // Debugging log
    displayElement.textContent = word;

    const audio = document.getElementById(`${word}-sound`);
    if (audio) {
      audio.currentTime = 0;
      audio.play();
    }

    const delay = word === 'kick' ? 1750 : 1000; // Custom delays for words
    loopTimeoutId = setTimeout(loop, delay); // Recursive loop
  }

  loop(); // Start the loop

  // Set a timeout to stop the loop after 90 seconds
  endTimeoutId = setTimeout(() => {
    //console.log("Ctimer1 complete"); // Debugging log
    clearTimeout(loopTimeoutId); // Clear loop
    displayElement.textContent = "Ctimer1";
    stopTimer(); // Ensure timer is cleared
  }, 90000); // End sequence after 90 seconds

  startTimer(90); // Start countdown timer
}

// Event listener for Ctimer1
Ctimer1.addEventListener('click', () => {
  //console.log("Ctimer1 clicked"); // Debugging log
  clearTimeout(loopTimeoutId); // Clear existing loop
  clearTimeout(endTimeoutId); // Clear end timer
  clearInterval(startCountdownIntervalId); // Clear pre-loop countdown
  stopTimer(); // Ensure no other timers are running

  // Start pre-loop countdown, then sequence
  startPreLoopCountdown(() => {
    //console.log("Starting Ctimer1 sequence..."); // Debugging log
    startCtimer1Sequence();
  });
});

    // INTERVAL TIMERS
    // Itimer1 
    function startItimer1Sequence() {
      let cycleCount = 0;

      function cycle() {
        if (cycleCount < 2) { // Repeat 2 times
          startCountdown(59, 'audio-rest', 'Work', () => {  // 60 seconds "Work" phase
            startCountdown(59, 'audio-work', 'Rest', () => {  // 60 seconds "Rest" phase
              cycleCount++;
              cycle(); // Start the next cycle
            });
          });
        } else {
          displayElement.textContent = "ITimer1"; //Timer end text content
        }
      }

      cycle(); // Start the first cycle
    }
    
    // Event listener Itimer1 timer
    Itimer1.addEventListener('click', () => {
      clearInterval(countdownInterval); // Stop any existing countdown
      startCountdown(10, 'audio-work', 'Get Ready', startItimer1Sequence); // Initial 10-sec countdown
    });

    // Itimer2 
    function startItimer2Sequence() {
      let cycleCount = 0;

      function cycle() {
        if (cycleCount < 4) { // Repeat 4 times
          startCountdown(29, 'audio-rest', 'Work', () => {  // 30 seconds "Work" phase
            startCountdown(9, 'audio-work', 'Rest', () => {  // 10 seconds "Rest" phase
              cycleCount++;
              cycle(); // Start the next cycle
            });
          });
        } else {
          displayElement.textContent = "Itimer2"; //Timer end text content
        }
      }

      cycle(); // Start the first cycle
    }

    // Event listener Itimer2 timer
    Itimer2.addEventListener('click', () => {
      clearInterval(countdownInterval); // Stop any existing countdown
      startCountdown(10, 'audio-work', 'Get Ready', startItimer2Sequence); // Initial 10-sec countdown
    });

    // Itimer3
    function startItimer3Sequence() {
      let cycleCount = 0;

      function cycle() {
        if (cycleCount < 8) { // Repeat 8 times
          startCountdown(9, 'audio-rest', 'Work', () => {  // 10 seconds "Work" phase
            startCountdown(4, 'audio-work', 'Rest', () => {  // 5 seconds "Rest" phase
              cycleCount++;
              cycle(); // Start the next cycle
            });
          });
        } else {
          displayElement.textContent = "Itimer3"; //Timer end text content
        }
      }

      cycle(); // Start the first cycle
    }
    
    // Event listener Itimer2 timer
    Itimer3.addEventListener('click', () => {
      clearInterval(countdownInterval); // Stop any existing countdown
      startCountdown(10, 'audio-work', 'Get Ready', startItimer3Sequence); // Initial 10-sec countdown
    });

    // ROLL TIMERS
    // Rtimer1
    function startRtimer1Sequence() {
      let cycleCount = 0;

      function cycle() {
        if (cycleCount < 2) { // Repeat 3 times
          startCountdown(179, 'audio-rest', 'Work', () => {  // 180 seconds "Work" phase
            startCountdown(89, 'audio-work', 'Rest', () => {  // 90 seconds "Rest" phase
              cycleCount++;
              cycle(); // Start the next cycle
            });
          });
        } else {
          displayElement.textContent = "Rtimer1"; //Timer end text content
        }
      }

      cycle(); // Start the first cycle
    }

    // Event listener Rtimer1 timer
    Rtimer1.addEventListener('click', () => {
      clearInterval(countdownInterval); // Stop any existing countdown
      startCountdown(10, 'audio-work', 'Get Ready', startRtimer1Sequence); // Initial 10-sec countdown
    });

    // Rtimer2
    function startRtimer2Sequence() {
      let cycleCount = 0;

      function cycle() {
        if (cycleCount < 2) { // Repeat 3 times
          startCountdown(299, 'audio-rest', 'Work', () => {  // 300 seconds "Work" phase
            startCountdown(149, 'audio-work', 'Rest', () => {  // 150 seconds "Rest" phase
              cycleCount++;
              cycle(); // Start the next cycle
            });
          });
        } else {
          displayElement.textContent = "Rtimer2"; //Timer end text content
        }
      }

      cycle(); // Start the first cycle
    }

    // Event listener Rtimer2 timer
    Rtimer2.addEventListener('click', () => {
      clearInterval(countdownInterval); // Stop any existing countdown
      startCountdown(10, 'audio-work', 'Get Ready', startRtimer2Sequence); // Initial 10-sec countdown
    });

    // Rtimer3
    function startRtimer3Sequence(workNamesTrio1) {
      let cycleCount = 0;
      function cycle() {
      if (cycleCount < 6) {
      const currentWorkName = workNamesTrio1[cycleCount];

      // Start the work phase
      startCountdown(179, 'audio-rest', currentWorkName, () => {
        // Start the rest phase
        startCountdown(59, 'audio-work', 'Rest', () => {
          cycleCount++;
          cycle(); // Start the next cycle
        });
      });
    } else {
      displayElement.textContent = "Rtimer3"; //Timer end text content
    }
  }

  cycle(); // Start the first cycle
}

// Event listener Rtimer3 timer
Rtimer3.addEventListener('click', () => {

  clearInterval(countdownInterval); // Stop any existing countdown

  // Generate and display the randomized work cycle session
  const workNamesTrio1 = ["A-T", "T-C", "C-A", "A-C", "T-A", "C-T"];
  shuffleArray(workNamesTrio1);// Shuffle once and pass it along
  workCycleList.innerHTML = `<strong>G-A:</strong><br>${workNamesTrio1.join('<br>')}`;

  //Start the "Get Ready" countdown
  startCountdown(15, 'audio-work', 'Get Ready', () => startRtimer3Sequence(workNamesTrio1)); // Initial 10-sec countdown
  });

  // Rtimer4
    function startRtimer4Sequence(workNamesTrio2) {
  let cycleCount = 0;

  function cycle() {
    if (cycleCount < 6) {
      const currentWorkName = workNamesTrio2[cycleCount];

      // Start the work phase
      startCountdown(299, 'audio-rest', currentWorkName, () => {
        // Start the rest phase
        startCountdown(59, 'audio-work', 'Rest', () => {
          cycleCount++;
          cycle(); // Start the next cycle
        });
      });
    } else {
      displayElement.textContent = "Rtimer4"; //Timer end text content
    }
  }

  cycle(); // Start the first cycle
}

// Event listener Rtimer4 timer
Rtimer4.addEventListener('click', () => {
  clearInterval(countdownInterval); // Stop any existing countdown

  // Generate and display the randomized work cycle session
  const workNamesTrio2 = ["A-T", "T-C", "C-A", "A-C", "T-A", "C-T"];
  shuffleArray(workNamesTrio2);// Shuffle once and pass it along
  workCycleList.innerHTML = `<strong>G-A:</strong><br>${workNamesTrio2.join('<br>')}`;

  //Start the "Get Ready" countdown
  startCountdown(15, 'audio-work', 'Get Ready', () => startRtimer4Sequence(workNamesTrio2)); // Initial 10-sec countdown
  });
    
  </script>
</body>
</html>
